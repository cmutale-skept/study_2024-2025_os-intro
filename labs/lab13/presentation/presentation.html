<h1 id="информация">Информация</h1>
<h2 id="докладчик">Докладчик</h2>
<div class="columns" data-align="center">
<div class="column" style="width:70%;">
<ul>
<li>Мутале Чали</li>
<li>НКА 05-24</li>
<li>факультет физико математических и естественных наук</li>
<li>Российский университет дружбы народов</li>
<li><a href="mailto:1032239667@rudn.ru">1032239667@rudn.ru</a></li>
<li><a href="https://cmutale.github.io/ru/"
class="uri">https://cmutale.github.io/ru/</a></li>
</ul>
</div>
</div>
<p>::::::::::::::</p>
<h1 id="цель-работы">Цель работы</h1>
<p>Изучить основы программирования в оболочке ОС UNIX. Научится писать
более сложные командные файлы с использованием логических управляющих
конструкций и циклов.</p>
<h1 id="задание">Задание</h1>
<ol type="1">
<li>Используя команды getopts grep, написать командный файл, который
анализирует командную строку</li>
<li>Написать на языке Си программу, которая вводит число и определяет,
является ли оно больше нуля, меньше нуля или равно нулю.</li>
<li>Написать командный файл, создающий указанное число файлов,
пронумерованных последовательно от 1 до N</li>
<li>Написать командный файл, который с помощью команды tar запаковывает
в архив все файлы в указанной директории.</li>
</ol>
<h1 id="выполнение-лабораторной-работы">Выполнение лабораторной
работы</h1>
<h2 id="командный-файл-который-анализирует-командную-строку">командный
файл, который анализирует командную строку</h2>
<p>Создаю файл file1 и в нем написала код, который анализирует командную
строку с ключами -i (прочитать данные из указанного файла), -o (вывести
данные в указанный файл), -p (указать шаблон для поиска), -C (различать
большие и малые буквы), -n (выдавать номера строк) используя команды
getopts grep:</p>
<h2 id="командный-файл-который-анализирует-командную-строку-1">командный
файл, который анализирует командную строку</h2>
<pre><code>while getopts &quot;i:o:p:C:n&quot; opt
do
case $opt in
i)inputfile=&quot;$OPTARG&quot;;;
o)outputfile=&quot;$OPTARG&quot;;;
p)template=&quot;$OPTARG&quot;;;
c)register=&quot;$OPTARG&quot;;;
n)number=&quot;&quot;;;
esac
done

grep -n &quot;$template&quot; &quot;$inputfile.txt&quot; &gt; &quot;$outputfile.txt&quot;
</code></pre>
<h2 id="командный-файл-который-анализирует-командную-строку-2">командный
файл, который анализирует командную строку</h2>
<figure id="fig:003">
<img src="image/3.PNG" style="width:70.0%" alt="Рис 1: Запуск file1" />
<figcaption aria-hidden="true">Рис 1: Запуск file1</figcaption>
</figure>
<h2
id="программa-которая-вводит-число-и-определяет-является-ли-оно-больше-нуля-меньше-нуля-или-равно-нулю.">программa,
которая вводит число и определяет, является ли оно больше нуля, меньше
нуля или равно нулю.</h2>
<p>Программа завершается с помощью функции exit(n), передавая информацию
о коде завершения в оболочку:</p>
<pre><code>#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

int main()
{
    int n;
    printf(&quot;Enter a number: &quot;);
    scanf(&quot;%d&quot;, &amp;n);
    if(n&gt;0)</code></pre>
<h2
id="программa-которая-вводит-число-и-определяет-является-ли-оно-больше-нуля-меньше-нуля-или-равно-нулю.-1">программa,
которая вводит число и определяет, является ли оно больше нуля, меньше
нуля или равно нулю.</h2>
<pre><code>    {
        exit(1);
    }   
    
    else if (n==0) {
        exit(0);}
    else
    {
    exit(2);
    }
}</code></pre>
<h2
id="программa-которая-вводит-число-и-определяет-является-ли-оно-больше-нуля-меньше-нуля-или-равно-нулю.-2">программa,
которая вводит число и определяет, является ли оно больше нуля, меньше
нуля или равно нулю.</h2>
<p>Далее создал командный файл который вызывает эту программу и,
проанализировав с помощью команды $?, выдает сообщение о том, какое
число было введено:</p>
<pre><code>gcc -o cprog file2.c
./cprog

case $? in
0) echo &quot;равно нулю&quot;;;
1) echo &quot;больше нуля&quot;;;
2) echo &quot;меньше нуля&quot;;;

esac</code></pre>
<h2
id="программa-которая-вводит-число-и-определяет-является-ли-оно-больше-нуля-меньше-нуля-или-равно-нулю.-3">программa,
которая вводит число и определяет, является ли оно больше нуля, меньше
нуля или равно нулю.</h2>
<p>Создал исполняемый файл и запустил:</p>
<figure id="fig:006">
<img src="image/6.PNG" style="width:70.0%"
alt="Рис 2: Результаты программы" />
<figcaption aria-hidden="true">Рис 2: Результаты программы</figcaption>
</figure>
<h2 id="командный-файл-создающий-указанное-число-файлов">командный файл,
создающий указанное число файлов</h2>
<p>Я написал командный файл, создающий указанное число файлов,
пронумерованных последовательно от 1 до N. Число файлов, которые
необходимо создать, передаётся в аргументы командной строки. Этот же
командный файл должен уметь удалять все созданные им файлы (если они
существуют):</p>
<pre><code>for((i=1; i&lt;=$*; i++))
do
if test -f &quot;$i&quot;.tmp
then rm &quot;$i&quot;.tmp
else touch &quot;$i.tmp&quot;
fi
done</code></pre>
<h2 id="командный-файл-создающий-указанное-число-файлов-1">командный
файл, создающий указанное число файлов</h2>
<p>Создал исполняемый файл и запустил:</p>
<figure id="fig:008">
<img src="image/8.PNG" style="width:70.0%"
alt="Рис 3: Создание файлов с помощью командного файла" />
<figcaption aria-hidden="true">Рис 3: Создание файлов с помощью
командного файла</figcaption>
</figure>
<h2
id="командный-файл-который-с-помощью-команды-tar-запаковывает-в-архив-все-файлы-в-указанной-директории.">командный
файл, который с помощью команды tar запаковывает в архив все файлы в
указанной директории.</h2>
<p>создал командный файл, который с помощью команды tar запаковывает в
архив все файлы в указанной директории. Модифицировала его так, чтобы
запаковывались только те файлы, которые были изменены менее недели тому
назад (использовать команду find).</p>
<pre><code>find $* -mtime -7 -mtime +0 -type f &gt; FILES.txt
tar -cf archive.tar -T FILES.txt</code></pre>
<h2
id="командный-файл-который-с-помощью-команды-tar-запаковывает-в-архив-все-файлы-в-указанной-директории.-1">командный
файл, который с помощью команды tar запаковывает в архив все файлы в
указанной директории.</h2>
<figure id="fig:0010">
<img src="image/10.PNG" style="width:70.0%"
alt="Рис 4: Результаты кода" />
<figcaption aria-hidden="true">Рис 4: Результаты кода</figcaption>
</figure>
<h1 id="выводы">Выводы</h1>
<p>При выполнении проделанной работы я научился писать более сложные
командные файлы с использованием логических управляющих конструкций и
циклов.</p>
